**Лабораторная работа №8**

**Текстовый редактор vi**

Рябцев И.В.; НКАбд-03-22

**1	Цель работы**

Познакомиться с операционной системой Linux. Получить практические навыки работы с редактором vi, установленным по умолчанию практически во всех дистрибутивах.

**2	Задание**

Последовательность выполнения работы 1. Ознакомиться с теоретическим материалом. 2. Ознакомиться с редактором vi. 3. Выполнить упражнения, используя команды vi.

Задание 1. Создание нового файла с использованием vi. 1. Создайте каталог с именем ~/work/os/lab06. 2. Перейдите во вновь созданный каталог. 3. Вызовите vi и создайте файл hello.sh. 4. Нажмите клавишу i и вводите следующий текст. 5. Нажмите клавишу Esc для перехода в командный режим после завершения ввода текста. 6. Нажмите : для перехода в режим последней строки и внизу вашего экрана появится приглашение в виде двоеточия. 7. Нажмите w (записать) и q (выйти), а затем нажмите клавишу Enter для сохранения вашего текста и завершения работы. 8. Сделайте файл исполняемым

Задание 2. Редактирование существующего файла 1. Вызовите vi на редактирование файла (vi ~/work/os/lab06/hello.sh) 2. Установите курсор в конец слова HELL второй строки. 3. Перейдите в режим вставки и замените на HELLO. Нажмите Esc для возврата в командный режим. 4. Установите курсор на четвертую строку и сотрите слово LOCAL. 5. Перейдите в режим вставки и наберите следующий текст: local, нажмите Esc для возврата в командный режим. 6. Установите курсор на последней строке файла. Вставьте после неё строку, содержащую следующий текст: echo $HELLO. 7. Нажмите Esc для перехода в командный режим. 8. Удалите последнюю строку. 9. Введите команду отмены изменений u для отмены последней команды. 10. Введите символ : для перехода в режим последней строки. Запишите произведённые изменения и выйдите из vi.

**3	Теоретическое введение**

В большинстве дистрибутивов Linux в качестве текстового редактора по умолчанию устанавливается интерактивный экранный редактор vi (Visual display editor). Редактор vi имеет три режима работы: - командный режим — предназначен для ввода команд редактирования и навигации по редактируемому файлу; - режим вставки — предназначен для ввода содержания редактируемого файла; - режим последней (или командной) строки — используется для записи изменений в файл и выхода из редактора. Для вызова редактора vi необходимо указать команду vi и имя редактируемого файла: vi  При этом в случае отсутствия файла с указанным именем будет создан такой файл. Переход в командный режим осуществляется нажатием клавиши Esc . Для выхода из редактора vi необходимо перейти в режим последней строки: находясь в командном режиме, нажать Shift-; (по сути символ : — двоеточие), затем: - набрать символы wq, если перед выходом из редактора требуется записать изменения в файл; - набрать символ q (или q!), если требуется выйти из редактора без сохранения. [1]

**4	Выполнение лабораторной работы**

Задание 1. Создание нового файла с использованием vi. 1. Создайте каталог с именем ~/work/os/lab06. 2. Перейдите во вновь созданный каталог. 3. Вызовите vi и создайте файл hello.sh. (рис. 3, 4)

![](Aspose.Words.7813460a-c3c3-44d0-9bef-09735c0b5374.001.png)

*Рис. 2: Выполнение необходимых команд в терминале*

![](Aspose.Words.7813460a-c3c3-44d0-9bef-09735c0b5374.002.png)

*Рис. 3: Файл hello.sh в текстовом редакторе vi*

- Нажмите клавишу i и вводите следующий текст. (рис. 5)

![](Aspose.Words.7813460a-c3c3-44d0-9bef-09735c0b5374.003.png)

*Рис. 4: Написание текста в vi*

- Нажмите клавишу Esc для перехода в командный режим после завершения ввода текста.
- Нажмите : для перехода в режим последней строки и внизу вашего экрана появится приглашение в виде двоеточия.
- Нажмите w (записать) и q (выйти), а затем нажмите клавишу Enter для сохранения вашего текста и завершения работы. (рис. 6)

![](Aspose.Words.7813460a-c3c3-44d0-9bef-09735c0b5374.004.png)

*Рис. 5: Выход из редактора с сохранением текста*

- Сделайте файл исполняемым (рис. 5,6 )

![](Aspose.Words.7813460a-c3c3-44d0-9bef-09735c0b5374.005.png)

*Рис. 6: Команда chmod*

![](Aspose.Words.7813460a-c3c3-44d0-9bef-09735c0b5374.005.png)

Задание 2. Редактирование существующего файла 1. Вызовите vi на редактирование файла (vi ~/work/os/lab06/hello.sh) 2. Установите курсор в конец слова HELL второй строки. 3. Перейдите в режим вставки и замените на HELLO. Нажмите Esc для возврата в командный режим. (рис. 9)

![](Aspose.Words.7813460a-c3c3-44d0-9bef-09735c0b5374.006.png)

*Рис. 7: Редактор vi*

- Установите курсор на четвертую строку и сотрите слово LOCAL.
- Перейдите в режим вставки и наберите следующий текст: local, нажмите Esc для возврата в командный режим. (рис. 10)

![](Aspose.Words.7813460a-c3c3-44d0-9bef-09735c0b5374.007.png)

*Рис. 8: Изменение текста*

- Установите курсор на последней строке файла. Вставьте после неё строку, содержащую следующий текст: echo $HELLO. 
- ![](Aspose.Words.7813460a-c3c3-44d0-9bef-09735c0b5374.008.png)

- Нажмите Esc для перехода в командный режим.
- Удалите последнюю строку. (рис. 9)

![](Aspose.Words.7813460a-c3c3-44d0-9bef-09735c0b5374.009.png)

*Рис. 10: Удаление последней строки*

- Введите команду отмены изменений u для отмены последней команды. 

![](Aspose.Words.7813460a-c3c3-44d0-9bef-09735c0b5374.010.png)

*Рис. 11: Команда отмены*

- Введите символ : для перехода в режим последней строки. Запишите произведённые изменения и выйдите из vi.

**5	Выводы**

В процессе выполнения лабораторной работы я познакомился с операционной системой Linux. Получил практические навыки работы с редактором vi, установленным по умолчанию практически во всех дистрибутивах.

**6	Контрольные вопросы**

- Дайте краткую характеристику режимам работы редактора vi.
- командный режим — предназначен для ввода команд редактирования и навигации по редактируемому файлу;
- режим вставки — предназначен для ввода содержания редактируемого файла;
- режим последней (или командной) строки — используется для записи изменений в файл и выхода из редактора.
- Как выйти из редактора, не сохраняя произведённые изменения?

Можно нажимать символ q (или q!), если требуется выйти из редактора без сохранения.

- Назовите и дайте краткую характеристику командам позиционирования.
- 0 (ноль) — переход в начало строки;
- $ — переход в конец строки;
- G — переход в конец файла;
- n G — переход на строку с номером n.
- Что для редактора vi является словом?

Редактор vi предполагает, что слово - это строка символов, которая может включать в себя буквы, цифры и символы подчеркивания.

- Каким образом из любого места редактируемого файла перейти в начало (конец) файла?

С помощью G — переход в конец файла

- Назовите и дайте краткую характеристику основным группам команд редактирования.
- Вставка текста – а — вставить текст после курсора; – А — вставить текст в конец строки; – i — вставить текст перед курсором; – n i — вставить текст n раз; – I — вставить текст в начало строки.
- Вставка строки – о — вставить строку под курсором; – О — вставить строку над курсором.
- Удаление текста – x — удалить один символ в буфер; – d w — удалить одно слово в буфер; – d $ — удалить в буфер текст от курсора до конца строки; – d 0 — удалить в буфер текст от начала строки до позиции курсора; – d d — удалить в буфер одну строку; – n d d — удалить в буфер n строк.
- Отмена и повтор произведённых изменений – u — отменить последнее изменение; – . — повторить последнее изменение.
- Копирование текста в буфер – Y — скопировать строку в буфер; – n Y — скопировать n строк в буфер; – y w — скопировать слово в буфер.
- Вставка текста из буфера – p — вставить текст из буфера после курсора; – P — вставить текст из буфера перед курсором.
- Замена текста – c w — заменить слово; – n c w — заменить n слов; – c $ — заменить текст от курсора до конца строки; – r — заменить слово; – R — заменить текст.
- Поиск текста – / текст — произвести поиск вперёд по тексту указанной строки символов текст; – ? текст — произвести поиск назад по тексту указанной строки символов текст.
- Необходимо заполнить строку символами $. Каковы ваши действия?

Перейти в режим вставки.

- Как отменить некорректное действие, связанное с процессом редактирования?

С помощью u — отменить последнее изменение

- Назовите и дайте характеристику основным группам команд режима последней строки.

Режим последней строки — используется для записи изменений в файл и выхода из редактора.

- Как определить, не перемещая курсора, позицию, в которой заканчивается строка?

$ — переход в конец строки

- Выполните анализ опций редактора vi (сколько их, как узнать их назначение и т.д.).

Опции редактора vi позволяют настроить рабочую среду. Для задания опций используется команда set (в режиме последней строки): – : set all — вывести полный список опций; – : set nu — вывести номера строк; – : set list — вывести невидимые символы; – : set ic — не учитывать при поиске, является ли символ прописным или строчным.

- Как определить режим работы редактора vi?

В редакторе vi есть два основных режима: командный режим и режим вставки. По умолчанию работа начинается в командном режиме. В режиме вставки клавиатура используется для набора текста. Для выхода в командный режим используется клавиша Esc или комбинация Ctrl + c .

**Список литературы**

1\. 	Лабораторная работа № 8. Текстовой редактор vi [Электронный ресурс]. URL: <https://esystem.rudn.ru/>.
